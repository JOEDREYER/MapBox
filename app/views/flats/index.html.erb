<p style="color: green"><%= notice %></p>

<h1>Flats</h1>

<div id="flats">
  <% @flats.each do |flat| %>
    <%= render flat %>
    <p>
      <%= link_to "Show this flat", flat %>
    </p>
  <% end %>
</div>

<%= link_to "New flat", new_flat_path %>

<br>

<%= form_with url: ask_openai_flats_path, method: :post, local: true do |f| %>
  <%= f.label :prompt, 'Ask OpenAI' %>
  <%= f.text_field :prompt %>
  <%= f.submit 'Submit' %>
<% end %>

<br>

<div style="width: 100%; height: 600px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
</div>
